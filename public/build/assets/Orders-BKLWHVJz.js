import{r as a,A as $,j as e,L as A,$ as D}from"./app-xG73tkTT.js";import{S as H,N as E}from"./Sidebar-BPfyMl9m.js";import{L as B}from"./LogoutModal-DEM7YaIK.js";import T from"./OrderDetailsModal-CkX79uuT.js";import U from"./StatusModal-B3CuDbeH.js";import"./CartModal -wHSOoMJ0.js";import"./Modal-vIE7vZne.js";import"./divWithClassName-DRjU92Yp.js";import"./index-5OY0UtMg.js";function Q({auth:Y,orders:j}){a.useEffect(()=>{$.init()},[]);const[n,f]=a.useState(!0),[N,m]=a.useState(!1),h=()=>f(!n),[c,y]=a.useState(""),[w,x]=a.useState(null),[S,u]=a.useState(!1),[v,p]=a.useState(!1),[l,_]=a.useState(1),d=5,[o,C]=a.useState({isSuccess:!1,title:"",message:""}),k=()=>{C({isSuccess:!0,title:"Cancelled",message:"Your order has been cancelled"}),p(!0)},P=t=>{x(t),u(!0)},L=()=>{x(null),u(!1)},M=(t,s=!1)=>{if(!t)return"N/A";const F={year:"numeric",month:"short",day:"numeric",...s&&{hour:"2-digit",minute:"2-digit"}};return new Date(t).toLocaleDateString(void 0,F)},O=t=>{const s={completed:{bg:"bg-success",text:"text-white",icon:"bi-check-circle-fill"},ongoing:{bg:"bg-warning",text:"text-dark",icon:"bi-arrow-repeat"},pending:{bg:"bg-secondary",text:"text-white",icon:"bi-clock-fill"},cancelled:{bg:"bg-danger",text:"text-white",icon:"bi-x-circle-fill"},shipped:{bg:"bg-info",text:"text-white",icon:"bi-truck"},default:{bg:"bg-secondary",text:"text-white",icon:"bi-question-circle-fill"}};return s[t.toLowerCase()]||s.default},i=j.filter(t=>c===""?t.status.toLowerCase()!=="cancelled":t.status.toLowerCase()===c.toLowerCase()),g=Math.ceil(i.length/d),b=i.slice((l-1)*d,l*d),r=t=>{_(t)};return e.jsxs("div",{className:`d-flex ${n?"sidebar-open":""}`,style:{overflow:"hidden"},children:[e.jsx(A,{title:"My Orders"}),e.jsx(H,{sidebarOpen:n,toggleSidebar:h}),e.jsx("div",{className:"content flex-grow-1",style:{marginLeft:n?"220px":"0",transition:"margin-left 0.3s ease",backgroundColor:"#F8F9FA",minHeight:"100vh"},children:e.jsxs("div",{className:"position-relative",style:{paddingTop:"50px"},children:[e.jsx(E,{toggleSidebar:h,setShowLogoutModal:m}),e.jsx("div",{className:"px-4 py-5 mt-2",style:{maxWidth:"1220px",margin:"0 auto"},children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm mb-4",children:[e.jsxs("div",{className:"card-header bg-white border-bottom py-3 d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-2",children:[e.jsx("h4",{className:"mb-0",children:"My Orders"}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("label",{htmlFor:"statusFilter",className:"me-2 mb-0 fw-semibold",children:"Filter:"}),e.jsxs("select",{id:"statusFilter",className:"form-select form-select-sm",style:{width:"110px"},value:c,onChange:t=>y(t.target.value),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsx("div",{className:"card-body p-0",children:i.length===0?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"bi bi-box-seam display-4 text-muted mb-3"}),e.jsx("h5",{className:"mb-2",children:"No orders found"}),e.jsx("p",{className:"text-muted mb-4",children:"You haven't placed any orders yet."}),e.jsx(D,{href:"/products",className:"btn btn-dark px-4",children:"Browse Products"})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{className:"bg-white border-bottom text-uppercase small text-muted",children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Order #"}),e.jsx("th",{children:"Items"}),e.jsx("th",{children:"Estimated Completion"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Payment"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Balance"})]})}),e.jsx("tbody",{children:b.map(t=>{const s=O(t.status);return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>P(t),children:e.jsx("i",{className:"bi bi-eye"})})}),e.jsxs("td",{className:"fw-semibold",children:["#",t.id]}),e.jsx("td",{children:e.jsxs("span",{className:"badge bg-light text-dark rounded-pill px-3",children:[t.items.length,t.items.length===1?"item":"items"]})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("small",{className:"text-muted",children:"Estimate:"}),e.jsx("span",{children:t.estimated_completion_date?M(t.estimated_completion_date):"-"})]})}),e.jsx("td",{children:e.jsxs("span",{className:`badge rounded-pill px-3 py-2 fw-medium ${s.bg} ${s.text}`,children:[e.jsx("i",{className:`bi ${s.icon} me-1`}),t.status]})}),e.jsx("td",{children:e.jsx("span",{className:`badge rounded-pill px-3 ${t.payment_status==="paid"?"bg-success text-white":t.payment_status==="partially_paid"?"bg-warning text-dark":t.payment_status==="unpaid"||t.payment_status==="pending_payment"?"bg-secondary text-white":"bg-dark text-white"}`,children:t.payment_status==="paid"?"Paid":t.payment_status==="partially_paid"?"Partially Paid":t.payment_status==="unpaid"||t.payment_status==="pending_payment"?"Unpaid":"Unknown"})}),e.jsxs("td",{className:"fw-semibold text-dark",children:["₱",Number(t.total_amount).toLocaleString("en-PH")]}),e.jsx("td",{className:"fw-semibold text-dark",children:t.payment_status==="unpaid"||t.payment_status==="pending_payment"?e.jsxs(e.Fragment,{children:["₱",Number(t.total_amount).toLocaleString("en-PH")]}):t.payment_status==="partially_paid"?e.jsxs(e.Fragment,{children:["₱",Number(t.total_amount/2).toLocaleString("en-PH")]}):Number(t.total_amount-(t.down_payment_amount||0))===0?e.jsx("span",{className:"text-success fw-bold d-flex align-items-center gap-1",children:e.jsx("i",{className:"bi bi-check-circle-fill"})}):e.jsxs(e.Fragment,{children:["₱",Number(t.total_amount-(t.down_payment_amount||0)).toLocaleString("en-PH")]})})]},t.id)})})]})})}),i.length>0&&e.jsx("div",{className:"card-footer bg-white border-top py-3",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-muted small",children:["Showing"," ",b.length," of"," ",i.length," ","orders"]}),e.jsx("nav",{"aria-label":"Page navigation",children:e.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[e.jsx("li",{className:`page-item ${l===1?"disabled":""}`,children:e.jsx("a",{className:"page-link",onClick:()=>r(l-1),children:"Previous"})}),Array.from({length:g},(t,s)=>e.jsx("li",{className:`page-item ${l===s+1?"active":""}`,children:e.jsx("a",{className:"page-link",onClick:()=>r(s+1),children:s+1})},s+1)),e.jsx("li",{className:`page-item ${l===g?"disabled":""}`,children:e.jsx("a",{className:"page-link",onClick:()=>r(l+1),children:"Next"})})]})})]})})]})})})})]})}),e.jsx(T,{order:w,onClose:L,show:S,onCancelSuccess:k}),e.jsx(U,{show:v,onHide:()=>p(!1),isSuccess:o.isSuccess,title:o.title,message:o.message}),e.jsx(B,{showLogoutModal:N,setShowLogoutModal:m})]})}export{Q as default};
