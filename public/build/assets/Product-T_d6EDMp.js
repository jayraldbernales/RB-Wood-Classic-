import{r as s,A as $,m as H,j as e,S as R}from"./app-BS4kugc_.js";import{L as W}from"./LogoutModal-NE8sUUso.js";import _ from"./AddProductModal-rDScM03x.js";import q from"./AdminSidebar-BzdvFww9.js";import U from"./DeleteProductModal-CfVyCDuD.js";import z from"./EditProductModal-DDzT_FBL.js";import B from"./ImageCarouselModal -C7nDDbxk.js";import G from"./StatusModal-Cy53L0d3.js";import J from"./AdminNavbar-DCtz39BS.js";import"./ContactMessagesModal-CjSeknne.js";function ae({categories:o,products:r}){s.useEffect(()=>{$.init()},[]);const[i,b]=s.useState(!0),[p,c]=s.useState(!1),[u,w]=s.useState(!1),[M,h]=s.useState(!1),[y,N]=s.useState([]),[v,d]=s.useState(!1),[P,m]=s.useState(!1),[x,C]=s.useState(null),[E,A]=s.useState(null),g=()=>b(!i),f=()=>w(!u),I=()=>d(!1),[D,l]=s.useState(!1),[n,a]=s.useState({isSuccess:!0,title:"",subtitle:""});H({name:"",category_id:"",description:"",price:"",image:null});const[j,k]=s.useState(""),F=r.filter(t=>!j||t.category_id==j),L=t=>{C(t),d(!0)},O=()=>{x&&R.delete(`/admin/product/${x}`,{onSuccess:()=>{d(!1),a({isSuccess:!0,title:"Succesfully Deleted",subtitle:"The product was successfully removed."}),l(!0)},onError:t=>{a({isSuccess:!1,title:"Delete Failed",subtitle:"There was an error deleting the product."}),l(!0)}})},T=t=>{A(t),m(!0)};return e.jsxs("div",{className:`d-flex ${i?"sidebar-open":""}`,style:{overflow:"hidden"},children:[e.jsx(q,{sidebarOpen:i,toggleSidebar:g}),e.jsx("div",{className:"content flex-grow-1",style:{marginLeft:i?"220px":"0",transition:"margin-left 0.3s ease",overflow:"hidden"},children:e.jsxs("div",{className:"position-relative min-vh-100 d-flex flex-column text-white text-center",style:{background:"#F6F4F5"},children:[e.jsx(J,{toggleSidebar:g,setShowLogoutModal:c}),e.jsxs("div",{className:"container px-4 py-3",style:{maxWidth:"1200px",marginTop:"100px"},children:[e.jsx("h2",{className:"text-dark border-bottom pb-2 text-start",style:{fontWeight:"600"},children:"Manage Products"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-stretch gap-2 my-3",children:[e.jsxs("select",{className:"form-select w-auto",style:{height:"40px"},onChange:t=>k(t.target.value),children:[e.jsx("option",{value:"",children:"All"}),o.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("button",{className:"btn btn-dark d-flex align-items-center gap-2 shadow-sm",style:{height:"40px"},onClick:f,children:[e.jsx("i",{className:"bi bi-plus-circle"})," Add Product"]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:r&&r.length>0?F.map(t=>{var S;return e.jsxs("tr",{children:[e.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:t.images&&t.images.length>0?e.jsx("div",{style:{width:"70px",height:"70px",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",margin:"auto"},onClick:()=>{N(t.images),h(!0)},children:e.jsx("img",{src:`/storage/${t.images[0].image}`,alt:t.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px"}})}):e.jsx("span",{children:"No Image"})}),e.jsx("td",{children:t.name}),e.jsx("td",{children:(S=t.category)==null?void 0:S.name}),e.jsx("td",{children:t.description}),e.jsxs("td",{children:["â‚±",Number(t.price).toLocaleString("en-PH")]}),e.jsxs("td",{children:[e.jsxs("button",{className:"btn btn-sm btn-success me-2",onClick:()=>T(t),children:[e.jsx("i",{className:"bi bi-pencil-square"})," ","Edit"]}),e.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>L(t.id),children:[e.jsx("i",{className:"bi bi-trash"})," ","Delete"]})]})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No products available."})})})]})})]})]})}),e.jsx(G,{show:D,onHide:()=>l(!1),isSuccess:n.isSuccess,title:n.title,subtitle:n.subtitle}),e.jsx(B,{showModal:M,setShowModal:h,images:y}),e.jsx(U,{show:v,handleClose:I,handleConfirm:O}),e.jsx(z,{showModal:P,toggleModal:()=>m(!1),categories:o,selectedProduct:E,onSuccess:t=>{a({isSuccess:!0,title:"Update Successful!",subtitle:t}),l(!0)},onError:t=>{a({isSuccess:!1,title:"Error!",subtitle:t}),l(!0)}}),e.jsx(_,{showModal:u,toggleModal:f,categories:o,onSuccess:()=>{a({isSuccess:!0,title:"Successfully Added!",subtitle:"Product added successfully"}),l(!0)},onError:()=>{a({isSuccess:!1,title:"Error!",subtitle:"Failed to add product"}),l(!0)}}),e.jsx(W,{showLogoutModal:p,setShowLogoutModal:c})]})}export{ae as default};
