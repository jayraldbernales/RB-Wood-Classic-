import{m as q,r as t,A as O,j as e,S as T}from"./app-CQPZVfaW.js";import{L as $}from"./LogoutModal-IrwRk79v.js";import P from"./AdminSidebar-DyY-x6KN.js";import W from"./StatusModal-3moMTwcl.js";import H from"./AdminNavbar-Wugsxcng.js";import"./ContactMessagesModal-CKtG64Z6.js";function G({categories:b}){const{data:j,setData:n,post:p,put:S,reset:v,processing:o,errors:r}=q({name:""}),[i,y]=t.useState(!0),[C,f]=t.useState(!1),[w,c]=t.useState(!1),[k,m]=t.useState(!1),[E,u]=t.useState(!1),[d,g]=t.useState(null),[h,a]=t.useState(!1),[x,l]=t.useState({isSuccess:!0,title:"",message:""});t.useEffect(()=>{let s;return h&&(s=setTimeout(()=>a(!1),3e3)),()=>{s&&clearTimeout(s)}},[h]),t.useEffect(()=>{O.init()},[]);const N=()=>y(!i),M=s=>{s.preventDefault(),!o&&p("/admin/categories",{onSuccess:()=>{v(),c(!1),l({isSuccess:!0,title:"Success!",message:"Category added successfully"}),a(!0)},onError:()=>{l({isSuccess:!1,title:"Error!",message:"Failed to add category"}),a(!0)}})},D=s=>{g(s),n("name",s.name),m(!0)},A=s=>{s.preventDefault(),!o&&S(`/admin/categories/${d.id}`,{onSuccess:()=>{m(!1),l({isSuccess:!0,title:"Success!",message:"Category updated successfully"}),a(!0)},onError:()=>{l({isSuccess:!1,title:"Error!",message:"Failed to update category"}),a(!0)}})},F=s=>{g(s),u(!0)},L=()=>{T.delete(`/admin/categories/${d.id}`,{onSuccess:()=>{u(!1),l({isSuccess:!0,title:"Success!",message:"Category deleted successfully"}),a(!0)},onError:()=>{l({isSuccess:!1,title:"Error!",message:"Failed to delete category"}),a(!0)}})};return e.jsxs("div",{className:`d-flex ${i?"sidebar-open":""}`,style:{overflow:"hidden"},children:[e.jsx(P,{sidebarOpen:i,toggleSidebar:N}),e.jsx("div",{className:"content flex-grow-1",style:{marginLeft:i?"220px":"0",transition:"margin-left 0.3s ease",overflow:"hidden"},children:e.jsxs("div",{className:"position-relative min-vh-100 d-flex flex-column text-white text-center",style:{background:"#F6F4F5"},children:[e.jsx(H,{toggleSidebar:N,setShowLogoutModal:f}),e.jsxs("div",{className:"container px-4 py-3",style:{maxWidth:"1200px",marginTop:"100px"},children:[e.jsx("h2",{className:"text-dark border-bottom pb-2 text-start",style:{fontWeight:"600"},children:"Manage Categories"}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsxs("button",{className:"btn btn-dark mb-3",onClick:()=>c(!0),children:[e.jsx("i",{className:"bi bi-plus-lg"})," Add Category"]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Category Name"}),e.jsx("th",{children:"Edit"}),e.jsx("th",{children:"Delete"})]})}),e.jsx("tbody",{children:b.length>0?b.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:e.jsxs("button",{className:"btn btn-sm btn-success",onClick:()=>D(s),children:[e.jsx("i",{className:"bi bi-pencil-square"})," ","Edit"]})}),e.jsx("td",{children:e.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>F(s),children:[e.jsx("i",{className:"bi bi-trash"})," ","Delete"]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No categories available."})})})]})})]})]})}),w&&e.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Add Category"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>c(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"Category Name"}),e.jsx("input",{type:"text",className:"form-control",value:j.name,onChange:s=>n("name",s.target.value),required:!0}),r.name&&e.jsx("div",{className:"text-danger",children:r.name})]}),e.jsx("button",{type:"submit",className:"btn btn-dark w-100",disabled:o,children:"Add Category"})]})})]})})}),k&&e.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Edit Category"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>m(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"Category Name"}),e.jsx("input",{type:"text",className:"form-control",value:j.name,onChange:s=>n("name",s.target.value),required:!0}),r.name&&e.jsx("div",{className:"text-danger",children:r.name})]}),e.jsx("button",{type:"submit",className:"btn btn-dark w-100",disabled:o,children:"Update"})]})})]})})}),E&&e.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Confirm Delete"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>u(!1)})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:['Are you sure you want to delete "',d==null?void 0:d.name,'"?']}),e.jsx("button",{className:"btn btn-danger w-100",onClick:L,children:"Yes, Delete"})]})]})})}),e.jsx(W,{show:h,onHide:()=>a(!1),isSuccess:x.isSuccess,title:x.title,message:x.message}),e.jsx($,{showLogoutModal:C,setShowLogoutModal:f})]})}export{G as default};
