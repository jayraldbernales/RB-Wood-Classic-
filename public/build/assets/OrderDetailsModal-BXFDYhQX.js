import{r as g,j as e,R as y,S as j}from"./app-CQPZVfaW.js";const b=({order:s,onClose:l,show:c,onCancelSuccess:d})=>{const[o,n]=g.useState(!1);if(!s||!c)return null;const i=(t,a=!1)=>{if(!t)return"N/A";const f={year:"numeric",month:"long",day:"numeric",...a&&{hour:"2-digit",minute:"2-digit"}};return new Date(t).toLocaleDateString(void 0,f)},m=t=>{const a={completed:"text-green-600",pending:"text-gray-600",ongoing:"text-yellow-600",cancelled:"text-red-600",shipped:"text-indigo-600",default:"text-gray-600"};return a[t.toLowerCase()]||a.default},x=t=>t!=null&&t.images&&t.images.length>0?t.images[0].url||`/storage/${t.images[0].image}`:"/placeholder-image.jpg",h=()=>{n(!0)},u=()=>{j.post(`/orders/${s.id}/cancel`,{},{preserveScroll:!0,onSuccess:()=>{d(),l(),n(!1)}})},r=s.payment_status==="partially_paid"?s.total_amount-(s.down_payment_amount||0):s.total_amount,p=()=>{switch(s.payment_status){case"paid":return e.jsx("span",{className:"text-green-600",children:"Paid"});case"partially_paid":return e.jsx("span",{className:"text-yellow-600",children:"Partially Paid"});case"unpaid":case"pending_payment":return e.jsx("span",{className:"text-gray-600",children:"Unpaid"});default:return e.jsx("span",{className:"text-gray-600",children:"Unknown"})}};return e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 z-[1060] overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 text-center",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-black bg-opacity-50","aria-hidden":"true",onClick:()=>n(!1)}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Confirm Cancellation"}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Are you sure you want to cancel Order #",s.id,"? This action cannot be undone."]})}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",onClick:()=>n(!1),children:"Go Back"}),e.jsx("button",{type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",onClick:u,children:"Confirm Cancel"})]})]})]})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto z-[1050]",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 py-6 text-center",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-dark opacity-45",onClick:l})}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-4 pb-2",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:`text-sm font-medium ${m(s.status)}`,children:s.status.toUpperCase()}),e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mt-1",children:["Order #",s.id]})]}),e.jsx("div",{className:"space-y-4 mb-6 max-h-24 overflow-y-auto",children:s.items.map(t=>e.jsx("div",{className:"flex items-start space-x-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-20 h-20 rounded-md overflow-hidden bg-gray-100",children:e.jsx("img",{src:x(t.product),alt:t.product.name,className:"h-full w-full object-cover",onError:a=>{a.target.onerror=null,a.target.src="https://via.placeholder.com/150?text=No+Image"}})}),e.jsx("div",{className:"flex-1 h-20 flex flex-col justify-between",children:e.jsxs("div",{className:"flex flex-col w-full space-y-1 overflow-hidden",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-md fs-5 font-semibold text-gray-900 truncate",children:t.product.name}),t.variation&&e.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.variation.name})]}),e.jsxs("div",{className:"w-full flex justify-between items-end",children:[e.jsxs("p",{className:"text-md text-gray-600",children:["Qty:"," ",t.quantity]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 text-end",children:["₱",(t.price*t.quantity).toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})})]})},t.id))}),e.jsxs("div",{className:"py-2 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-600",children:"Order date:"}),e.jsx("span",{className:"font-medium",children:i(s.created_at)})]}),e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-gray-600",children:"Payment method:"}),e.jsx("span",{className:"font-medium",children:s.payment_method==="card"?"Credit Card":s.payment_method==="gcash"?"GCash":"Pay In-Store"})]}),e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-gray-600",children:"Payment status:"}),e.jsx("span",{className:"font-medium",children:p()})]}),e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-gray-600",children:"Delivered on:"}),e.jsx("span",{className:"font-medium text-green-600 flex items-center",children:s.status.toLowerCase()==="completed"?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),i(s.actual_completion_date)]}):"-"})]})]}),s.shipping_address&&e.jsxs("div",{className:"py-3 border-t border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Delivery"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Address"}),e.jsx("p",{className:"text-sm",children:s.shipping_address.split(`
`).map((t,a)=>e.jsxs(y.Fragment,{children:[t,e.jsx("br",{})]},a))})]}),e.jsxs("div",{className:"py-3 border-t border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Price Details"}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-600",children:"Total Product Price"}),e.jsxs("span",{className:"text-gray-800",children:["₱",s.total_amount.toLocaleString("en-PH")]})]}),s.payment_status==="partially_paid"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-600",children:"Amount Paid"}),e.jsxs("span",{className:"text-green-600",children:["₱",(s.down_payment_amount||0).toLocaleString("en-PH")]})]}),e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-gray-600",children:"Remaining Balance"}),e.jsxs("span",{className:"text-red-600",children:["₱",r.toLocaleString("en-PH")]})]})]}),e.jsxs("div",{className:"flex justify-between py-2 mt-2 border-t border-gray-200 font-bold",children:[e.jsx("span",{children:s.payment_status==="partially_paid"?"Amount Due Now":"Order Total"}),e.jsxs("span",{children:["₱",s.payment_status==="partially_paid"?r.toLocaleString("en-PH"):s.total_amount.toLocaleString("en-PH")]})]})]})]})}),e.jsx("div",{className:"bg-white px-4 pb-3 sm:px-6 flex flex-col gap-3",children:s.status.toLowerCase()==="pending"?e.jsx("button",{className:"w-full py-2 px-4 rounded-md text-white bg-black hover:bg-gray-800 transition font-medium",onClick:h,children:"Cancel Order"}):e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 sm:text-sm",onClick:l,children:"Close"})})]})]})})]})};export{b as default};
